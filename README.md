# Поиск вакансий с подключением БД
-----------------------------------
-----------------------------------
## Задание
### Проект по БД
В рамках проекта вам необходимо получить данные о компаниях и вакансиях с сайта hh.ru, спроектировать таблицы в БД PostgreSQL и загрузить полученные данные в созданные таблицы.

* Основные шаги проекта 
- Получить данные о работодателях и их вакансиях с сайта hh.ru. Для этого используйте публичный API hh.ru и библиотеку requests.
- Выбрать не менее 10 интересных вам компаний, от которых вы будете получать данные о вакансиях по API.
- Спроектировать таблицы в БД PostgreSQL для хранения полученных данных о работодателях и их вакансиях. Для работы с БД используйте библиотеку psycopg2.
- Реализовать код, который заполняет созданные в БД PostgreSQL таблицы данными о работодателях и их вакансиях.
- Создать класс DBManager  для работы с данными в БД.

  Создайте класс DBManager, который будет подключаться к БД PostgreSQL и иметь следующие методы:
  ``` get_companies_and_vacancies_count()``` — получает список всех компаний и количество вакансий у каждой компании.
``` get_all_vacancies()```  — получает список всех вакансий с указанием названия компании, названия вакансии и зарплаты и ссылки на вакансию.
``` get_avg_salary()```  — получает среднюю зарплату по вакансиям.
``` get_vacancies_with_higher_salary()```  — получает список всех вакансий, у которых зарплата выше средней по всем вакансиям.
``` get_vacancies_with_keyword()```  — получает список всех вакансий, в названии которых содержатся переданные в метод слова, например python.
Класс DBManager  должен использовать библиотеку psycopg2  для работы с БД.

# Реализация задания

Функциональный код разбит на модули: 
файл **hh_api.py**, содержит модуль для взаимодействия с API;
файл **db_manager.py**, содержит модуль для подключения к БД и управления вакансиями;
файл **db_utils** содержит модуль для взаимодействия с файлами.

Решение выложено на **GitHub**.
В проекте есть **.gitignore**.
В коммиты не добавлены игнорируемые файлы.
В проекте есть файл с зависимостями **requirements.txt**
Нет грубых нарушений PEP 8 в оформлении кода. Весь код проверен линтерами **flake8**, **black**, **isort**.
В проекте есть «точка входа» файл **main.py** — модуль, запустив который можно получить результат всех реализованных в проекте функциональностей.

Классы соответствуют минимум первым двум принципам SOLID.
Все классы задокументированы.
Все методы классов задокументированы.
Все методы классов типизированы.

## Выполнение:
Проект запрашивает вакансии с hh.ru и сохраняет в Базе данных.
В рамках проекта мы получаем данные о 10 выбранных компаниях и вакансиях с сайта hh.ru, создаем таблицы в БД PostgreSQL и загружаем полученные данные 
в созданные таблицы. Создан класс DBManager, который будет подключаться к БД PostgreSQL и иметь следующие методы:
- получать список всех компаний и количество вакансий у каждой компании.
- получать список всех вакансий с указанием названия компании, названия вакансии и зарплаты и ссылки на вакансию.
- получать среднюю зарплату по вакансиям.
- получать список всех вакансий, у которых зарплата выше средней по всем вакансиям.
= получать список всех вакансий, в названии которых содержатся переданные в метод слово.

## Работа с базами данных:

Получаем данные о компаниях и вакансиях с платформы **hh.ru** и записывает данные в базу данных запустите скрипт **main.py**

**[postgresql] host=localhost** - ваш хост **user=postgres** - пользователь который подключается **port=5432** - ваш порт **password=xxx** - пароль от базы данных
пользователя.
Данные для работы с базой данных и c hh.ru записаны в файл **.env**, который занесен в **.gitignore**, пример реализации данных в файле **.env** внесены в **.env_example**

После записи данных программа предлагает ввести цифру, каждая из цифр имеет свой функционал (1, 2, 3, 4, 5, 0) 
1 - Выводиться список компаний и количество открытых вакансий у каждой компании

2 - Выводиться список всех вакансий

3 - Выводиться средняя зарплата по всем вакансиям

4 - Выводиться список вакансий у которых зарплата выше средней по вакансиям

5 - Вас просят ввести ключевое слово для фильтрации например "Программист". Выводиться список вакансий у которых в названии совпало первое слово

0 - Программа завершает работу


# Клонирование репозитория на GitHub

Выполнены следующие действия:
1. git remote add origin git@github.com:natalybalandina/PythonProject_course_paper_3.git
2. git branch -M main
3. git push -u origin main


# Результаты выполнения программы

*Вводим команду* 

```python src/main.py```

```
БД 'hh_db' уже существует
Таблицы успешно созданы
Данные успешно загружены в БД

Выберите действие:
1. Компании и количество вакансий
2. Все вакансии
3. Средняя зарплата
4. Вакансии с зарплатой выше средней
5. Поиск вакансий по ключевому слову
0. Выход
Введите номер действия:
```

*Пример реализации кода*
```
Выберите действие:
1. Компании и количество вакансий
2. Все вакансии
3. Средняя зарплата
4. Вакансии с зарплатой выше средней
5. Поиск вакансий по ключевому слову
0. Выход
Введите номер действия: 5
Введите ключевое слово: python
Вакансия: ML-инженер/Бэкенд-разработчик на Java, Go, Python или С++, Компания: 15478, URL: https://hh.ru/vacancy/125533526

Выберите действие:
1. Компании и количество вакансий
2. Все вакансии
3. Средняя зарплата
4. Вакансии с зарплатой выше средней
5. Поиск вакансий по ключевому слову
0. Выход
Введите номер действия: 1
Компания: МАГНИТ, Розничная сеть, Вакансий: 27
Компания: Алианта Групп, Вакансий: 0
Компания: Российские железные дороги, Вакансий: 31
Компания: VK, Вакансий: 27
Компания: Пятёрочка, Вакансий: 28
Компания: Т-Банк, Вакансий: 32
Компания: Skyeng, Вакансий: 24
Компания: Ростелеком, Вакансий: 26
Компания: СБЕР, Вакансий: 40
Компания: Яндекс, Вакансий: 31
Компания: Департамент Ф53, Вакансий: 31

Выберите действие:
1. Компании и количество вакансий
2. Все вакансии
3. Средняя зарплата
4. Вакансии с зарплатой выше средней
5. Поиск вакансий по ключевому слову
0. Выход
Введите номер действия: 3
Средняя зарплата: 105878

Выберите действие:
1. Компании и количество вакансий
2. Все вакансии
3. Средняя зарплата
4. Вакансии с зарплатой выше средней
5. Поиск вакансий по ключевому слову
0. Выход
Введите номер действия: 4
Вакансия: Кладовщик, Зарплата: 137000
Вакансия: Кладовщик, Зарплата: 141500
Вакансия: Кладовщик, Зарплата: 137000
Вакансия: Кладовщик, Зарплата: 127500
Вакансия: Кладовщик, Зарплата: 130050
Вакансия: Кладовщик (Санкт-Петербург), Зарплата: 141500
Вакансия: Кладовщик, Зарплата: 143000
Вакансия: Кладовщик, Зарплата: 127500
Вакансия: Комплектовщик, Зарплата: 110000        
Вакансия: Кладовщик, Зарплата: 110000
Вакансия: Кладовщик, Зарплата: 118000
Вакансия: Старший офис-менеджер, Зарплата: 130000
Вакансия: Системный администратор, Зарплата: 107000
Вакансия: Кладовщик, Зарплата: 175000
Вакансия: Сотрудник на склад интернет-магазина, Зарплата: 170000
Вакансия: Сотрудник на склад (Пушкино), Зарплата: 135000
Вакансия: Помощник на склад (сканировать украшения, косметику, одежду), Зарплата: 180000
Вакансия: Сотрудник на склад кроссовок и спортивной одежды, Зарплата: 170000
Вакансия: Сотрудник склада, Зарплата: 217500     
Вакансия: Начинающий сотрудник по обработке заказов (даркстор), Зарплата: 107900
Вакансия: Сотрудник на склад (Новосибирск), Зарплата: 125500
Вакансия: Кладовщик и менеджер ПВЗ, Зарплата: 182500
Вакансия: Помощник по оформлению заказов, Зарплата: 115900
Вакансия: Водитель (офисный), Зарплата: 107600   
Вакансия: Ведущий юрисконсульт (подряд/поставки/оказание услуг), Зарплата: 150000
Вакансия: Дежурный моторвагонного депо, Зарплата: 150000
Вакансия: Менеджер по продажам, Зарплата: 230000 
Вакансия: Менеджер онлайн курсов со знанием английского языка, Зарплата: 130000
Вакансия: Менеджер по работе с ключевыми клиентами, Зарплата: 247500
Вакансия: Full Stack Analyst (AI, LMS), Зарплата: 260000
Вакансия: Представитель онлайн-школы, Зарплата: 110000
Вакансия: Кладовщик, Зарплата: 110000
Вакансия: Кладовщик, Зарплата: 117750
Вакансия: Сотрудник на склад (Котовск), Зарплата: 135000
Вакансия: Сборщик интернет - заказов, Зарплата: 200000
Вакансия: Помощник по оформлению интернет заказов, Зарплата: 242500
Вакансия: Сборщик | Сортировщик заказов, Зарплата: 210000
Вакансия: Начинающий сотрудник по обработке заказов (даркстор), Зарплата: 107900
Вакансия: Рабочий на железную дорогу, Зарплата: 111500
Вакансия: Машинист железнодорожно-строительной машины, Зарплата: 113500
Вакансия: Представитель онлайн-школы, Зарплата: 110000
Вакансия: Работник склада, Зарплата: 132500      
Вакансия: Сотрудник по упаковке заказов, Зарплата: 122200
Вакансия: Сотрудник на склад кроссовок и спортивной одежды, Зарплата: 170000
Вакансия: Представитель онлайн-школы, Зарплата: 110000

Выберите действие:
1. Компании и количество вакансий
2. Все вакансии
3. Средняя зарплата
4. Вакансии с зарплатой выше средней
5. Поиск вакансий по ключевому слову
0. Выход
Введите номер действия: 2
Компания: Пятёрочка, Вакансия: Кладовщик, Зарплат
а: 112000-162000 RUR, URL: https://hh.ru/vacancy/121171854
Компания: Пятёрочка, Вакансия: Кладовщик, Зарплат
а: 133000-150000 RUR, URL: https://hh.ru/vacancy/121172485
Компания: Пятёрочка, Вакансия: Бизнес-аналитик (j
unior), Зарплата: None-None None, URL: https://hh.ru/vacancy/125897589
Компания: Пятёрочка, Вакансия: Кладовщик, Зарплат
а: 112000-162000 RUR, URL: https://hh.ru/vacancy/125311614
Компания: Пятёрочка, Вакансия: Категорийный менед
жер (Готовая Еда), Зарплата: 150000-None RUR, URL: https://hh.ru/vacancy/125828660
```
...
```
 Первый, Зарплата: 61000-None RUR, URL: https://hh.ru/vacancy/125999210
Компания: СБЕР, Вакансия: Клиентский менеджер Сбе
р, г. Тольятти, Зарплата: 79400-79400 RUR, URL: https://hh.ru/vacancy/107195628
Компания: СБЕР, Вакансия: Менеджер по развитию ма
лого бизнеса, Зарплата: 98500-None RUR, URL: https://hh.ru/vacancy/125440717
Компания: Российские железные дороги, Вакансия: Э
кономист I категории, Зарплата: 60500-67500 RUR, URL: https://hh.ru/vacancy/126022857
Компания: VK, Вакансия: Специалист по документооб
ороту в команду VK, Зарплата: None-None None, URL: https://hh.ru/vacancy/125092298
Компания: Skyeng, Вакансия: Представитель онлайн-
школы, Зарплата: 70000-150000 RUR, URL: https://hh.ru/vacancy/126010280

Выберите действие:
1. Компании и количество вакансий
2. Все вакансии
3. Средняя зарплата
4. Вакансии с зарплатой выше средней
5. Поиск вакансий по ключевому слову
0. Выход
Введите номер действия: 0
(pythonproject9-py3.13) PS C:\Users\bal1n\...\PythonProject9
```

# ВЫВОД
Таким образом, все требуемые здания выполнены
